(function(h){function u(b){b.debug&&(f("callbackIfComplete()"),f("totalFiles: "+b.totalFiles),f("filesLoaded: "+b.filesLoaded));b.async&&b.filesLoaded===b.totalFiles&&b.callback&&b.callback()}function p(b,a){a.debug&&f("loadAndParseFiles");null!==b&&0<b.length?v(b[0],a,function(){b.shift();p(b,a)}):u(a)}function v(b,a,l){a.debug&&(f("loadAndParseFile('"+b+"')"),f("totalFiles: "+a.totalFiles),f("filesLoaded: "+a.filesLoaded));null!==b&&"undefined"!==typeof b&&h.ajax({url:b,async:a.async,cache:a.cache,
dataType:"text",success:function(c,e){a.debug&&(f("Succeeded in downloading "+b+"."),f(c));w(c,a);l()},error:function(c,e,d){a.debug&&f("Failed to download or parse "+b+". errorThrown: "+d);404===c.status&&--a.totalFiles;l()}})}function w(b,a){var l="",c=b.split(/\n/),e=/(\{\d+})/g,d=/\{(\d+)}/g,f=/(\\u.{4})/ig;c.forEach(function(b,m){b=b.trim();if(0<b.length&&"#"!=b.match("^#")){var k=b.split("=");if(0<k.length){for(var n=decodeURI(k[0]).trim(),g=1==k.length?"":k[1];"\\"===g.match(/\\$/);)g=g.substring(0,
g.length-1),g+=c[++m].trimRight();for(var q=2;q<k.length;q++)g+="="+k[q];g=g.trim();if("map"==a.mode||"both"==a.mode)(k=g.match(f))&&k.forEach(function(a){g=g.replace(a,x(a))}),h.i18n.map[n]=g;if("vars"==a.mode||"both"==a.mode)if(g=g.replace(/"/g,'\\"'),y(n),e.test(g)){var p=!0,r="",t=[];g.split(e).forEach(function(a){!e.test(a)||0!==t.length&&-1!=t.indexOf(a)||(p||(r+=","),r+=a.replace(d,"v$1"),t.push(a),p=!1)});l+=n+"=function("+r+"){";n='"'+g.replace(d,'"+v$1+"')+'"';l+="return "+n+";};"}else l+=
n+'="'+g+'";'}}});eval(l);a.filesLoaded+=1}function y(b){if(/\./.test(b)){var a="";b.split(/\./).forEach(function(b,c){0<c&&(a+=".");a+=b;eval("typeof "+a+' == "undefined"')&&eval(a+"={};")})}}function x(b){var a=[];b=parseInt(b.substr(2),16);0<=b&&b<Math.pow(2,16)&&a.push(b);return a.reduce(function(a,b){return a+String.fromCharCode(b)},"")}h.i18n={};h.i18n.map={};var f=function(b){console.log("i18n::"+b)};h.i18n.properties=function(b){b=h.extend({name:"Messages",language:"",path:"",mode:"vars",
cache:!1,debug:!1,encoding:"UTF-8",async:!1,callback:null},b);b.path.match(/\/$/)||(b.path+="/");b.language=this.normaliseLanguageCode(b.language);var a=b.name&&b.name.constructor===Array?b.name:[b.name];b.totalFiles=2*a.length+(5<=b.language.length?a.length:0);b.debug&&f("totalFiles: "+b.totalFiles);b.filesLoaded=0;a.forEach(function(a){var c,e,d;c=b.path+a+".properties";e=b.language.substring(0,2);e=b.path+a+"_"+e+".properties";5<=b.language.length&&(d=b.language.substring(0,5),d=b.path+a+"_"+d+
".properties");p([c,e,d],b)});b.callback&&!b.async&&b.callback()};h.i18n.prop=function(b){var a=h.i18n.map[b];if(null===a)return"["+b+"]";var f;2==arguments.length&&h.isArray(arguments[1])&&(f=arguments[1]);var c;if("string"==typeof a){for(c=0;-1!=(c=a.indexOf("\\",c));)a="t"==a.charAt(c+1)?a.substring(0,c)+"\t"+a.substring(c++ +2):"r"==a.charAt(c+1)?a.substring(0,c)+"\r"+a.substring(c++ +2):"n"==a.charAt(c+1)?a.substring(0,c)+"\n"+a.substring(c++ +2):"f"==a.charAt(c+1)?a.substring(0,c)+"\f"+a.substring(c++ +
2):"\\"==a.charAt(c+1)?a.substring(0,c)+"\\"+a.substring(c++ +2):a.substring(0,c)+a.substring(c+1);var e=[],d,m;for(c=0;c<a.length;)if("'"==a.charAt(c))if(c==a.length-1)a=a.substring(0,c);else if("'"==a.charAt(c+1))a=a.substring(0,c)+a.substring(++c);else{for(d=c+2;-1!=(d=a.indexOf("'",d));)if(d==a.length-1||"'"!=a.charAt(d+1)){a=a.substring(0,c)+a.substring(c+1,d)+a.substring(d+1);c=d-1;break}else a=a.substring(0,d)+a.substring(++d);-1==d&&(a=a.substring(0,c)+a.substring(c+1))}else"{"==a.charAt(c)?
(d=a.indexOf("}",c+1),-1==d?c++:(m=parseInt(a.substring(c+1,d)),!isNaN(m)&&0<=m?(c=a.substring(0,c),""!==c&&e.push(c),e.push(m),c=0,a=a.substring(d+1)):c=d+1)):c++;""!==a&&e.push(a);a=e;h.i18n.map[b]=e}if(0===a.length)return"";if(1==a.length&&"string"==typeof a[0])return a[0];e="";c=0;for(d=a.length;c<d;c++)e="string"==typeof a[c]?e+a[c]:f&&a[c]<f.length?e+f[a[c]]:!f&&a[c]+1<arguments.length?e+arguments[a[c]+1]:e+("{"+a[c]+"}");return e};h.i18n.normaliseLanguageCode=function(b){if(!b||2>b.length)b=
navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||"en";b=b.toLowerCase();b=b.replace(/-/,"_");3<b.length&&(b=b.substring(0,3)+b.substring(3).toUpperCase());return b}})(jQuery);
